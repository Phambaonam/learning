*******************************************************************************

F:\Books\CodeSchool-JS\React\???.pdf

*******************************************************************************
# Component-based Architecture  


In React, we solve problems by creating components. 
If a component gets too complex, we break it into smaller, simpler components.

*******************************************************************************
## Components
*******************************************************************************


A component in React works similarly to JavaScript functions: 
It generates an output every time it is invoked.

*******************************************************************************
## virtual DOM
*******************************************************************************

The virtual DOM is an in-memory representation of real DOM elements generated by React components before any changes are made to the page.


In-memory representation of what will become real elements.

Actual elements displayed on the browser.


Virtual DOM diffing allows React to minimize changes to the DOM as a result of user actions — therefore, increasing browser performance.


Only this paragraph has changed and only this paragraph is replaced.

Other elements remain untouche.

*******************************************************************************
## ES6
*******************************************************************************

We want to simply print a message to the screen using a React component.


Components in React are JavaScript classes that inherit from the React.Component base class.

class StoryBox extends React.Component {
    render() {
        return( <div>Story Box</div> );
    }
}


1. Components are written in upper camel case.

2. Component class inherits from a React base class.

3. Every component needs a render() function.

4. No quotes needed — don't freak out.


Now we need to tell our application where to put the result into our web page.


We use ReactDOM to render components to our HTML page as it reads output from a supplied React component and adds it to the DOM.


ReactDOM.render(
    <StoryBox />,
    document.getElementById('story-app')
);

1. Invoke StoryBox — again, we don't need quotes.

2. Target container where component will be rendered to html target where Element'id="story-app" (Target container)




Every time we create a new React component, we use it by writing an element named after the class.


// Using StoryBox component  


*******************************************************************************
*******************************************************************************


## // defualt props ??? 


// ES6 constructor (no getInitialState: function )
// ES6 constructor (no getDefaultProps: function)

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
http://react2.xgqfrms.xyz/docs/reusable-components.html

## 默认 Prop 值
React 支持以声明式的方式来定义 props 的默认值。


var ComponentWithDefaultProps = React.createClass({
    getDefaultProps: function() {
        return {
            value: 'default value'
        };
    },
    /* ... */
});


## State 初始值

var TickTock = React.createClass({
    getInitialState: function() {
        return {
            seconds: 0
        };
    },
    /* ... */
});


## ES6 Classes

// ES6 constructor (no getInitialState: function )
// ES6 constructor (no getDefaultProps: function)

ES6 Class API近似于 React.createClass 除了 getInitialState。

你应该在构造函数里设置你的state，而不是提供一个单独的 getInitialState 方法。
就像 getInitialState 的返回值，你赋给 this.state 的值会被作为组件的初始 state。

另一个不同是 propTypes 和 defaultProps 是在构造函数里被定义为属性，而不是在 class body 里。


export class Counter extends React.Component {
    constructor(props) {
        super(props);
        this.state = {count: props.initialCount};
    },
    tick() {
        this.setState({count: this.state.count + 1});
    },
    render() {
        return (
            <div onClick={this.tick.bind(this)}>
                Clicks: {this.state.count}
            </div>
        );
    }
}

Counter.propTypes = { initialCount: React.PropTypes.number };

Counter.defaultProps = { initialCount: 0 };



+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++




+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

http://react2.xgqfrms.xyz/docs/reusable-components.html#es6-classes

react2 API docs codes bugs :


*************************
{ a b c } missing "," 


{ a, b, c }

*************************

## ES6 Classes

export class Counter extends React.Component {
    constructor(props) {
        super(props);
        this.state = {count: props.initialCount};
    },
    tick() {
        this.setState({count: this.state.count + 1});
    },
    render() {
        return (
            <div onClick={this.tick.bind(this)}>
                Clicks: {this.state.count}
            </div>
        );
    }
}



+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


*******************************************************************************
## Application Structure
*******************************************************************************

// components.js
...
ReactDOM.render(
    <StoryBox />, document.getElementById('story-app')
);

// index.html

<!DOCTYPE html>
<html>
    <body>
        <div id="story-app">
            <!-- Target container -->
        </div>
    </body>
</html>

That’s all there is to creating a component. Now we just need to add libraries.



<!DOCTYPE html>
<html>
    <body>
        <div id="story-app">
            <!-- Target container -->
        </div>
        <!--  -->
        <script src="vendors/react.js"></script>
        <script src="vendors/react-dom.js"></script>
        <script src="vendors/babel.js"></script>
        <!-- babel  -->
        <script type="text/babel" src="components.js"></script>
    </body>
</html>

## React libraries

vendors
----react.js
----react-dom.js
----babel.js(standalone)


Babel: Allows using latest features of JavaScript (class syntax, fat arrow, etc.)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


G:\wwwRoot\learning\Front-End\React\React\ES6-React-App\libs

G:\wwwRoot\learning\Front-End\React\React\app01\libs


# JSX (babel-standalone)


# JSX => JS  


https://cdn.xgqfrms.xyz/babel/babel.min.js

babel-standalone/babel.min.js & type="text/babel" 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


*******************************************************************************
## React Application Flow
*******************************************************************************

To clarify, here is what takes place when we load a page with a React component:

1. First, the static HTML page is loaded...

2. ...then then React library and our custom component is loaded...

3. ...then the ReactDOM renderer renders the component....

4. ...returning a virtual representation of the DOM, which is turned into real DOM elements.


*******************************************************************************

## Quick Recap on React

React was built to solve one problem:
building large applications with data that changes over time.

In React, we write apps in terms of components.

We use JavaScript classes when declaring React components.

Components must extend the React.Component class and must contain a render() method.

We call the ReactDOM.render() function to render components to a
web page.

*******************************************************************************


*******************************************************************************
## Understanding JSX
*******************************************************************************

The markup we use when writing React apps is not a string. 
This markup is called JSX (JavaScript XML).

1. HTML elements are written in lowercase.

<div>Story Box</div>

2. React components are written in upper camel case.

<StoryBox />

JSX is just another way of writing JavaScript with a transpile step.


## JSX to JS

React.createElement('div', null, 'Story Box')

React.createElement(StoryBox, null)


JSX looks similar to HTML, and it is ultimately transformed into JavaScript.

class StoryBox extends React.Component {
    render() {
        return(
            <div>
                <h3>Stories App</h3>
                <p className="lead">Sample paragraph</p>
            </div>
        );
    }
}

Notice we are using className and not class, which is a JavaScript-reserved keyword.


## Transpiled JSX code

React.createElement(
    "div", 
    null,
    React.createElement(
        "h3",
        null,
        "Stories App"
    ),
    React.createElement(
        "p",
        {className:"lead"},
        "Sample paragraph"
    )
);


## From JSX to HTML


1. All JSX gets transformed to JavaScript.

2. Rendered by the browser

3. Generated HTML


## Using the Date Object in JSX


Here, we’re displaying the current time using JavaScript’s native Date object and JSX.

const now = new Date();

<p className="lead">
    Current time: {now.toTimeString()}
</p>

Code written within curly braces gets interpreted as literal JavaScript


## Iterating Arrays in JSX

Here, we’re displaying a list of elements using JSX and JavaScript’s native map function.

const topicsList = ['HTML', 'JavaScript', 'React'];

{topicsList.map( topic => <li>{topic}</li> )}


This function returns this JSX array.




Quick Recap on JSX

JSX stands for JavaScript XML.

JSX markup looks similar to HTML, but ultimately gets transpiled to JavaScript function calls, which React will know how to render to the page.

Code written within curly braces is interpreted as literal JavaScript.

It is a common pattern to map arrays to JSX elements.






*******************************************************************************
## Talk Through Props
*******************************************************************************

We are building a commenting engine that will allow visitors to post comments on a blog post, picture, etc.


What the structure of our React app should look like.


CommentBox
----Comment
----Comment
----...


There are some common things we always do when creating new components.


1. New class

2. Inherit from React.Component

3. Return JSX from render function


++++++++++++++++++++++++++++++++++++++
# React-ES6-Snippets

rcc + tab

react component skeleton (rcc,tab)
++++++++++++++++++++++++++++++++++++++ 

class NewComponent extends React.Component {
    ...
    render() {
        return ( ... );
    }
}


Let’s start with an HTML mockup and identify potential components by looking at the markup.

CommentBox component
Comment component

<div class="comment-box">
    <h3>Comments</h3>
    <h4 class="comment-count">2 comments</h4>
    <div class="comment-list">
        <div ="comment">
            <p class="comment-header">
                Anne Droid
            </p>
            <p class="comment-body">
                I wanna know what love is...
            </p>
            <div class="comment-footer">
                <a href="#" class="comment-footer-delete">
                    Delete comment
                </a>
            </div>
        </div>
    </div>
</div>


The Comment component renders the markup for each comment, including its author and body.


class becomes className in JSX

Can now be used as JSX, like this: <Comment />



Now we’ll declare the CommentBox component and use the previously declared Comment component.

Using the Comment component

<div class="comment-box">
    <h3>Comments</h3>
    <h4 class="comment-count">2 comments</h4>
    <div class="comment-list">
        // comment
        <Comment />
        <Comment />
        <Comment />
        ...
    </div>
</div>

## React Components Accept Arguments

Arguments passed to components are called props. 
They look similar to regular HTML element attributes.

Passing arguments to Comment

<Comment author="Morgan McCircuit" body="Great picture!" />
<Comment author="Bending Bender" body="Excellent stuff" />

## Reading Props in the Comment Component

Arguments passed to components can be accessed using the this.props object.


Reading the author prop

Reading the body prop

class Comment extends React.Component {
    render() {
        return(
            <div className="comment">
                <p className="comment-header">{this.props.author}</p>
                <p className="comment-body">
                    {this.props.body}
                </p>
                <div className="comment-footer">
                    <a href="#" className="comment-footer-delete">
                        Delete comment
                    </a>
                </div>
            </div>
        );
    }
}


## Passing and Receiving Arguments Review

We use the this.props object to read parameters that were passed to the component.

Passing Props

<Comment
    author="Morgan McCircuit"
    body="Great picture!" />

Receiving Props

// Reads arguments passed to a component

class Comment extends React.Component {
    render() {
        return(
            ...
            <p className="comment-header">{this.props.author}</p>
            <p className="comment-body">
                {this.props.body}
            </p>
            ...
        );
    }
}

## Quick Recap on Props

We just covered a lot of content — here’s a summary of what we learned.


Convert HTML mockup to React components

Created two components: CommentBox and Comment

How to pass arguments to components using props

Props look like HTML element attributes


## Passing Dynamic Arguments  

Problem: Props Aren’t Dynamic Yet

We are passing literal strings as props, but what if we wanted to traverse an array of objects?


// Hardcoded values

<Comment
    author="Morgan McCircuit" body="Great picture!" />
<Comment
    author="Bending Bender" body="Excellent stuff" />


JavaScript Object Arrays (JSON Data)

Typically, when we consume data from API servers, we are returned object arrays.

const commentList = [
    { id: 1, author: 'Morgan McCircuit', body: 'Great picture!' },
    { id: 2, author: 'Bending Bender', body: 'Excellent stuff' }
];


Excellent stuff & Great picture!


## Mapping an Array to JSX


We can use JavaScript’s map function to create an array with Comment components.

// Underscore

Underscore helps distinguish custom methods from React methods

New method that will return array of JSX elements

_getComments() {
    const commentList = [
        { id: 1, author: 'Morgan McCircuit', body: 'Great picture!' },
        { id: 2, author: 'Bending Bender', body: 'Excellent stuff' }
    ];
    return commentList.map(() => {
        return (<Comment />);
    });
}


Returns an array with a new component built for each element present in commentList.

## Passing Dynamic Props






























*******************************************************************************
## 
*******************************************************************************





*******************************************************************************
## 
*******************************************************************************



*******************************************************************************
## 
*******************************************************************************
























































































































