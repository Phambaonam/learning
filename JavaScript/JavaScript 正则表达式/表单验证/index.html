<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"> 
    <title>Bootstrap 实例 - 模态框（Modal）插件</title>
    <link rel="stylesheet" href="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="1.css"> -->
</head>
<body>

<h2>创建模态框（Modal）</h2>
<!-- 按钮触发模态框 -->
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
    开始演示模态框
</button>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    申请上架
                </h4>
            </div>
              <div class="modal-body">
                <div>
                    <span>商品名称：</span>
                    <span>康师傅</span>
                </div>
                <div>
                    <span>销售名称：</span>
                    <input type="text" class="check-text" placeholder="销售名称" maxlength="60" id="saleName" //>
                    <div></div>
                </div>
                <div>
                    <span>商品规格：</span>
                    <input type="text" class="check-text" placeholder="商品规格" maxlength="20" id="" />
                    <div></div>
                </div>
                <div>
                    <span>生产日期：</span>
                    <input type="date" placeholder="生产日期"/>
                    <div></div>
                </div>
                <div>
                    <span>上架数量：</span>
                    <input type="text" placeholder="上架数量"/>
                    <div></div>
                </div>
                <div>
                    <span>销售价格：</span>
                    <input type="number"  placeholder="销售价格" />
                    <div></div>
                </div>
                    <div>
                    <span>赠豆数量：</span>
                    <input type="number"  placeholder="赠豆数量"/>
                    <span>每一百赠豆可抵扣一元</span>
                    <div></div>
                </div>
                    <div>
                    <span>起订数量：</span>
                    <input type="number" min="1" name="" placeholder="起订数量">
                    <div></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消
                </button>
                <button class="btn btn-primary" type="submit" id="submit-btn">
                    确认
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
    <script>
        // XSS 
        

        // let strRegex = "";
        let bool = false;
        const xssRegexTest = (strRegex)=>{
            const xssRegex = /[^\<\\\>’"=&$!@;%]+/ig;
            // https://regexper.com/#%2F%5B%5E%5C%3C%5C%5C%5C%3E%E2%80%99%22%3D%26%24!%40%3B%25%5D%2B%2Fig
            // let temp = xssRegex.test(strRegex);
            let temp = null;
            for (var i = 0; i < strRegex.length; i++) {
                temp = xssRegex.test(strRegex[i]);
                // strRegex.split("");
                console.log(temp);
                console.log(strRegex[i]);
                if (strRegex.length !== 0 && temp) {
                    bool = true;
                }
            }
            // console.log(temp);
            // console.log(strRegex.length);
            
            return bool;
        }
        // console.log(bool);
        let btn = document.querySelector('#submit-btn');
        // console.log(btn);
        btn.addEventListener("click", () => {
            let allText = document.querySelectorAll('input[type="text"]');
            console.log(allText);
            for (let i = 0; i < allText.length; i++) {
                // console.log(allText[i]);
                console.log(allText[i].value);
                xssRegexTest(allText[i].value);
                console.log(xssRegexTest(allText[i].value));
            }
            if(bool){
                fetch('https://cdn.xgqfrms.xyz/json/cats.json')
                .then(function(response) {
                    console.log(response);
                    return response;
                });
            }
        });
    </script>
</div>
</body>
</html>
